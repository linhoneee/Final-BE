2024-11-08T11:22:05.139+07:00  INFO 20312 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Starting PaymentServiceApplication using Java 22.0.1 with PID 20312 (C:\CODE\FINAL MAIN\test2\payment-service\target\classes started by ASUS in C:\CODE\FINAL MAIN\test2\OrderService)
2024-11-08T11:22:05.195+07:00 DEBUG 20312 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Running with Spring Boot v3.2.7-SNAPSHOT, Spring v6.1.10
2024-11-08T11:22:05.202+07:00  INFO 20312 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-08T11:22:08.477+07:00  INFO 20312 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-08T11:22:08.487+07:00  INFO 20312 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-08T11:22:08.604+07:00  INFO 20312 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61 ms. Found 0 Redis repository interfaces.
2024-11-08T11:22:09.972+07:00  INFO 20312 --- [CommonService] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8009 (http)
2024-11-08T11:22:10.012+07:00  INFO 20312 --- [CommonService] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-08T11:22:10.013+07:00  INFO 20312 --- [CommonService] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-11-08T11:22:10.139+07:00  INFO 20312 --- [CommonService] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-08T11:22:10.140+07:00  INFO 20312 --- [CommonService] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4727 ms
2024-11-08T11:22:14.252+07:00  WARN 20312 --- [CommonService] [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-11-08T11:22:15.160+07:00  INFO 20312 --- [CommonService] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8009 (http) with context path ''
2024-11-08T11:22:15.180+07:00  INFO 20312 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Started PaymentServiceApplication in 11.465 seconds (process running for 13.348)
2024-11-08T12:06:36.990+07:00  INFO 20312 --- [CommonService] [http-nio-8009-exec-6] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-08T12:06:37.001+07:00  INFO 20312 --- [CommonService] [http-nio-8009-exec-6] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-08T12:06:37.048+07:00  INFO 20312 --- [CommonService] [http-nio-8009-exec-6] o.s.web.servlet.DispatcherServlet        : Completed initialization in 45 ms
2024-11-08T12:06:40.590+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-6] c.l.C.advide.ExceptionAdvide             : Unknown internal server error: Unable to connect to Redis
2024-11-08T12:06:40.590+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-6] c.l.C.advide.ExceptionAdvide             : Exception class: class org.springframework.data.redis.RedisConnectionFailureException
2024-11-08T12:06:40.590+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-6] c.l.C.advide.ExceptionAdvide             : Exception cause: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
2024-11-08T12:08:06.334+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-3] c.l.C.advide.ExceptionAdvide             : Unknown internal server error: Unable to connect to Redis
2024-11-08T12:08:06.334+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-3] c.l.C.advide.ExceptionAdvide             : Exception class: class org.springframework.data.redis.RedisConnectionFailureException
2024-11-08T12:08:06.334+07:00 ERROR 20312 --- [CommonService] [http-nio-8009-exec-3] c.l.C.advide.ExceptionAdvide             : Exception cause: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
2024-11-08T12:15:23.327+07:00  INFO 20312 --- [CommonService] [http-nio-8009-exec-6] c.l.p.Controller.PaypalController        : Thanh toán thành công: {
  "id": "PAYID-M4WZ4WA1KT111017P372504E",
  "intent": "sale",
  "payer": {
    "payment_method": "paypal",
    "status": "VERIFIED",
    "payer_info": {
      "email": "15102002@personal.example.com",
      "first_name": "John",
      "last_name": "Doe",
      "payer_id": "682LVCHCAMN9Q",
      "country_code": "US",
      "shipping_address": {
        "recipient_name": "John Doe",
        "line1": "1 Main St",
        "city": "San Jose",
        "country_code": "US",
        "postal_code": "95131",
        "state": "CA"
      }
    }
  },
  "cart": "2T4053103B249094B",
  "transactions": [
    {
      "related_resources": [
        {
          "sale": {
            "id": "1J195680NX465004K",
            "amount": {
              "currency": "USD",
              "total": "16857.29",
              "details": {
                "subtotal": "16857.29",
                "shipping": "0.00",
                "handling_fee": "0.00",
                "shipping_discount": "0.00",
                "insurance": "0.00"
              }
            },
            "payment_mode": "INSTANT_TRANSFER",
            "state": "completed",
            "protection_eligibility": "ELIGIBLE",
            "protection_eligibility_type": "ITEM_NOT_RECEIVED_ELIGIBLE,UNAUTHORIZED_PAYMENT_ELIGIBLE",
            "transaction_fee": {
              "currency": "USD",
              "value": "588.81"
            },
            "parent_payment": "PAYID-M4WZ4WA1KT111017P372504E",
            "create_time": "2024-11-08T05:15:23Z",
            "update_time": "2024-11-08T05:15:23Z",
            "links": [
              {
                "href": "https://api.sandbox.paypal.com/v1/payments/sale/1J195680NX465004K",
                "rel": "self",
                "method": "GET"
              },
              {
                "href": "https://api.sandbox.paypal.com/v1/payments/sale/1J195680NX465004K/refund",
                "rel": "refund",
                "method": "POST"
              },
              {
                "href": "https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4WZ4WA1KT111017P372504E",
                "rel": "parent_payment",
                "method": "GET"
              }
            ]
          }
        }
      ],
      "amount": {
        "currency": "USD",
        "total": "16857.29",
        "details": {
          "subtotal": "16857.29",
          "shipping": "0.00",
          "handling_fee": "0.00",
          "shipping_discount": "0.00",
          "insurance": "0.00"
        }
      },
      "payee": {
        "email": "sb-vkj8131074225@business.example.com",
        "merchant_id": "YUGBVHGSQHYDJ"
      },
      "description": "Payment description",
      "item_list": {
        "shipping_address": {
          "recipient_name": "John Doe",
          "line1": "1 Main St",
          "city": "San Jose",
          "country_code": "US",
          "postal_code": "95131",
          "state": "CA"
        }
      }
    }
  ],
  "failed_transactions": [],
  "state": "approved",
  "create_time": "2024-11-08T05:15:03Z",
  "update_time": "2024-11-08T05:15:23Z",
  "links": [
    {
      "href": "https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4WZ4WA1KT111017P372504E",
      "rel": "self",
      "method": "GET"
    }
  ]
}
2024-11-08T12:15:23.478+07:00  INFO 20312 --- [CommonService] [http-nio-8009-exec-6] c.l.p.Controller.PaypalController        : Dữ liệu thanh toán: {"id":1,"userId":1,"items":[{"productId":4,"name":"warehouse 1 2","price":77.0,"quantity":7,"weight":777,"primaryImageUrl":"/uploads/1a667bc7-11aa-4867-9cb8-4746a65587c6-Screenshot 2024-07-12 135940.png"}],"selectedShipping":{},"distanceData":{"userId":1,"originLatitude":15.996928614767532,"originLongitude":108.26706105189344,"warehouseId":1,"destinationLatitude":15.9962329,"destinationLongitude":108.2642553,"distance":0.43},"total":16857.29,"platform":"mobile"}
2024-11-08T13:29:42.166+07:00  INFO 20728 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Starting PaymentServiceApplication using Java 22.0.1 with PID 20728 (C:\CODE\FINAL MAIN\test2\payment-service\target\classes started by ASUS in C:\CODE\FINAL MAIN\test2\OrderService)
2024-11-08T13:29:42.169+07:00 DEBUG 20728 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Running with Spring Boot v3.2.7-SNAPSHOT, Spring v6.1.10
2024-11-08T13:29:42.172+07:00  INFO 20728 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-08T13:29:43.632+07:00  INFO 20728 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-08T13:29:43.639+07:00  INFO 20728 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-08T13:29:43.699+07:00  INFO 20728 --- [CommonService] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 0 Redis repository interfaces.
2024-11-08T13:29:44.637+07:00  INFO 20728 --- [CommonService] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8009 (http)
2024-11-08T13:29:44.649+07:00  INFO 20728 --- [CommonService] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-08T13:29:44.649+07:00  INFO 20728 --- [CommonService] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-11-08T13:29:44.758+07:00  INFO 20728 --- [CommonService] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-08T13:29:44.761+07:00  INFO 20728 --- [CommonService] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2491 ms
2024-11-08T13:29:45.895+07:00  WARN 20728 --- [CommonService] [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-11-08T13:29:46.157+07:00  INFO 20728 --- [CommonService] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8009 (http) with context path ''
2024-11-08T13:29:46.172+07:00  INFO 20728 --- [CommonService] [main] c.l.p.PaymentServiceApplication          : Started PaymentServiceApplication in 4.944 seconds (process running for 6.383)
